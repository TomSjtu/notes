
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="一只Tom的笔记本">
      
      
        <meta name="author" content="Tom">
      
      
        <link rel="canonical" href="https://tomsjtu.github.io/notes/linux/monitor/trace/">
      
      
        <link rel="prev" href="../intro/">
      
      
        <link rel="next" href="../probe/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.14">
    
    
      
        <title>静态跟踪 - 一只Tom的笔记本</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.10ba22f1.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Source Code Pro"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="一只Tom的笔记本" class="md-header__button md-logo" aria-label="一只Tom的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            一只Tom的笔记本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              静态跟踪
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/TomSjtu/notes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../arm/" class="md-tabs__link">
          
  
    
  
  ARM

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ros2/" class="md-tabs__link">
          
  
    
  
  ROS2

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../pl/" class="md-tabs__link">
          
  
    
  
  编程语言

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ai/" class="md-tabs__link">
          
  
    
  
  人工智能

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../cloud/" class="md-tabs__link">
          
  
    
  
  云计算

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tools/" class="md-tabs__link">
          
  
    
  
  Tools

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../others/" class="md-tabs__link">
          
  
    
  
  其他

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="一只Tom的笔记本" class="md-nav__button md-logo" aria-label="一只Tom的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    一只Tom的笔记本
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/TomSjtu/notes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Linux
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../kernel/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    内核剖析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            内核剖析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2_2" id="__nav_2_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_2">
            <span class="md-nav__icon md-icon"></span>
            基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/compile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    编译内核
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/program/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内核编程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    调试技术
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/synch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    同步语义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/others/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    其他
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    进程管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            进程管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/load/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程加载与启动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/wait/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    等待队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/sched/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程调度
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/ipc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进程间通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/preempt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内核抢占
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/kthread/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内核线程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_2_4" id="__nav_2_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    中断处理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_4">
            <span class="md-nav__icon md-icon"></span>
            中断处理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/interrupt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中断处理程序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/bottom_half/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中断下半部
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_2_5" id="__nav_2_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    内存管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_5">
            <span class="md-nav__icon md-icon"></span>
            内存管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/mm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    物理内存管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/vma/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    虚拟内存管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/recycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存回收
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/oom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/ion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ION内存管理器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/cma/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    连续内存分配
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_2_6" id="__nav_2_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    文件系统
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_6">
            <span class="md-nav__icon md-icon"></span>
            文件系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/vfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    虚拟文件系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/block/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    块I/O
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_2_7" id="__nav_2_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    网络系统
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_7">
            <span class="md-nav__icon md-icon"></span>
            网络系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/iomultiplexing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O多路复用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/io_uring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    异步IO
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_2_8" id="__nav_2_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    时间系统
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_8">
            <span class="md-nav__icon md-icon"></span>
            时间系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    时间子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/timer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    定时器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/hrtimer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    高精度定时器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/rt_patch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实时补丁
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_2_9" id="__nav_2_2_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    电源管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_9">
            <span class="md-nav__icon md-icon"></span>
            电源管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/pm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    电源管理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_2_10" id="__nav_2_2_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    shell脚本
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_10">
            <span class="md-nav__icon md-icon"></span>
            shell脚本
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kernel/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell脚本
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../drivers/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    设备驱动程序
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            设备驱动程序
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    硬件知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/protocol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通信协议
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内核模块
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/dts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设备树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/interrupt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中断子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/dma/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    直接内存访问
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    设备模型框架
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            设备模型框架
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/device_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设备模型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/platform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    平台总线模型
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" >
        
          
          <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    字符、块和网络
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            字符、块和网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/chardev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    字符设备驱动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/blkdev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    块设备驱动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/netdev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络设备驱动
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5" >
        
          
          <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    低速设备驱动
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_5">
            <span class="md-nav__icon md-icon"></span>
            低速设备驱动
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/pinctrl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pinctrl子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/gpio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GPIO子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/i2c/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I2C子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/spi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SPI子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/uart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UART子系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/input/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input子系统
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6" >
        
          
          <label class="md-nav__link" for="__nav_2_3_6" id="__nav_2_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    高速设备驱动
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_6">
            <span class="md-nav__icon md-icon"></span>
            高速设备驱动
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/ethernet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ethernet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/pcie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PCIE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/usb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/wifi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wifi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/bluetooth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    蓝牙
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_7" >
        
          
          <label class="md-nav__link" for="__nav_2_3_7" id="__nav_2_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他设备驱动
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_7">
            <span class="md-nav__icon md-icon"></span>
            其他设备驱动
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../drivers/socketcan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Socket Can
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../optimization/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    性能调优
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            性能调优
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimization/cpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPU性能调优
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimization/memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存性能调优
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimization/disk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    磁盘I/O性能调优
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../optimization/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络性能调优
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    性能观测
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            性能观测
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2" >
        
          
          <label class="md-nav__link" for="__nav_2_5_2" id="__nav_2_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    性能观测技术概览
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5_3" id="__nav_2_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    内核跟踪技术
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5_3">
            <span class="md-nav__icon md-icon"></span>
            内核跟踪技术
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    静态跟踪
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    静态跟踪
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ftrace" class="md-nav__link">
    <span class="md-ellipsis">
      ftrace
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ftrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      常用配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    <span class="md-ellipsis">
      function
    </span>
  </a>
  
    <nav class="md-nav" aria-label="function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function_graph" class="md-nav__link">
    <span class="md-ellipsis">
      function_graph
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trace-cmd" class="md-nav__link">
    <span class="md-ellipsis">
      trace-cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trace-cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      使用方法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perf" class="md-nav__link">
    <span class="md-ellipsis">
      perf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="perf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      事件类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      火焰图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      跟踪点
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../probe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    动态跟踪
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_4" >
        
          
          <label class="md-nav__link" for="__nav_2_5_4" id="__nav_2_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ebpf
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_4">
            <span class="md-nav__icon md-icon"></span>
            ebpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ebpf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eBPF入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bcc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BCC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bpftrace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bpftrace
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../arm/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ARM
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ARM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/secure_boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    安全启动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARM64的启动
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/aarch64/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARM架构基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/standard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    编程规范
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ARM汇编
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            ARM汇编
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A64指令集
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/assembler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GNU汇编
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    异常处理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            异常处理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    异常处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/gic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GIC
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ARM同步机制
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            ARM同步机制
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/atomic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    原子操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/lock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    锁的实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/barrier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存屏障
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    内存管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            内存管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/mm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    高速缓存
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../arm/tlb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TLB管理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ros2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ROS2
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ROS2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros2/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    入门介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ros2/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    核心概念
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../pl/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    编程语言
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            C
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/c/standard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C编程规范
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/c/gcc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GCC工具链
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/c/misc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言杂项
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../pl/cpp/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    C++
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_2" >
        
          
          <label class="md-nav__link" for="__nav_5_3_2" id="__nav_5_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_2">
            <span class="md-nav__icon md-icon"></span>
            基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/misc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++杂项
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O流
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/exception/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    异常处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/gdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GDB
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3_3" id="__nav_5_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    包管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_3">
            <span class="md-nav__icon md-icon"></span>
            包管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/cmake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CMake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/conan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conan
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_4" >
        
          
          <label class="md-nav__link" for="__nav_5_3_4" id="__nav_5_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    面向对象
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_4">
            <span class="md-nav__icon md-icon"></span>
            面向对象
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/oop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面向对象
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_5" >
        
          
          <label class="md-nav__link" for="__nav_5_3_5" id="__nav_5_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    标准库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_5">
            <span class="md-nav__icon md-icon"></span>
            标准库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标准库容器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标准库算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/regex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    正则表达式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    日期和时间
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_6" >
        
          
          <label class="md-nav__link" for="__nav_5_3_6" id="__nav_5_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    内存管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_6">
            <span class="md-nav__icon md-icon"></span>
            内存管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/mm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存管理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_7" >
        
          
          <label class="md-nav__link" for="__nav_5_3_7" id="__nav_5_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    并发
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_7">
            <span class="md-nav__icon md-icon"></span>
            并发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/concurrency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    多线程编程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_8" >
        
          
          <label class="md-nav__link" for="__nav_5_3_8" id="__nav_5_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    现代C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_8">
            <span class="md-nav__icon md-icon"></span>
            现代C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/cpp/cpp11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++11
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../pl/python/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Python
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../pl/go/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Go
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_5_2" id="__nav_5_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    基础知识
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5_2">
            <span class="md-nav__icon md-icon"></span>
            基础知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    快速入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/function/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/package/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    包管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    接口
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/concurrency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    并发
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/reflect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    反射
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    泛型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/unit_test/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    单元测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    调试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_5_3" id="__nav_5_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    标准库
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5_3">
            <span class="md-nav__icon md-icon"></span>
            标准库
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../pl/go/stdlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    标准库
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ai/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    人工智能
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ai/dl/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    深度学习
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            深度学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/dl/onnx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ONNX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ai/opencl/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    opencl
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            opencl
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../cloud/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    云计算
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            云计算
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cloud/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    容器技术
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../tools/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/github/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    github
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tools/markdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markdown
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../others/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    其他
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    配置文件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/serializer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据序列化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/video/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    音视频基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/ffmpeg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ffmpeg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/interpreter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解释器
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ftrace" class="md-nav__link">
    <span class="md-ellipsis">
      ftrace
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ftrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      常用配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    <span class="md-ellipsis">
      function
    </span>
  </a>
  
    <nav class="md-nav" aria-label="function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#function_graph" class="md-nav__link">
    <span class="md-ellipsis">
      function_graph
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trace-cmd" class="md-nav__link">
    <span class="md-ellipsis">
      trace-cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="trace-cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      使用方法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perf" class="md-nav__link">
    <span class="md-ellipsis">
      perf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="perf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      事件类型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      火焰图
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      跟踪点
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="_1">静态跟踪<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p><code>ftrace</code>和<code>perf</code>工具都可以用来实现静态跟踪。</p>
<h2 id="ftrace">ftrace<a class="headerlink" href="#ftrace" title="Permanent link">&para;</a></h2>
<p><img alt="alt text" src="../../../images/kernel/ftrace.jpg" /></p>
<p>ftrace 是一个内部跟踪器，用于调试或者分析性能问题。</p>
<p>首先进入到 /sys/kernel/debug/tracing 目录，查看当前支持的跟踪器：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>cat<span class="w"> </span>available_tracers<span class="w"> </span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>timerlat<span class="w"> </span>osnoise<span class="w"> </span>hwlat<span class="w"> </span>blk<span class="w"> </span>mmiotrace<span class="w"> </span>function_graph<span class="w"> </span>wakeup_dl<span class="w"> </span>wakeup_rt<span class="w"> </span>wakeup<span class="w"> </span><span class="k">function</span><span class="w"> </span>nop
</code></pre></div>
<p>其中常用的是<code>function</code>和<code>function_graph</code>，<code>function</code>只显示函数名，而<code>function_graph</code>还显示该函数的调用关系。</p>
<p>/events/ 目录列出了可以跟踪的各个模块，进入模块目录，enable 写入1表示打开静态跟踪，然后访问 /tracing/ 目录的<code>trace_pipe</code>就可以看到内核打印的日志了。</p>
<h3 id="_2">常用配置<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>available_tracers</td>
<td>支持的跟踪器，current_tracer必须是这里面支持的跟踪器</td>
</tr>
<tr>
<td>available_events</td>
<td>支持的跟踪事件</td>
</tr>
<tr>
<td>available_filter_functions</td>
<td>可跟踪的函数</td>
</tr>
<tr>
<td>current_tracer</td>
<td>当前使用的跟踪器，默认为nop</td>
</tr>
<tr>
<td>trace</td>
<td>跟踪结果，用cat查看</td>
</tr>
<tr>
<td>tracing_on</td>
<td>开启或暂停</td>
</tr>
<tr>
<td>max_graph_depth</td>
<td>函数嵌套的最大深度</td>
</tr>
<tr>
<td>set_ftrace_filter</td>
<td>仅追踪特定的函数</td>
</tr>
<tr>
<td>set_ftrace_notrace</td>
<td>忽略特定的函数</td>
</tr>
<tr>
<td>set_ftrace_pid</td>
<td>追踪特定的PID</td>
</tr>
</tbody>
</table>
<h3 id="function">function<a class="headerlink" href="#function" title="Permanent link">&para;</a></h3>
<p>function 为函数跟踪器，使用方法如下：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>&gt;<span class="w"> </span>current_tracer
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>tracing_on
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>tracing_on
</code></pre></div>
<p>读取日志：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>cat<span class="w"> </span>trace<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">30</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="c1"># tracer: function</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">#</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># entries-in-buffer/entries-written: 82435/3496025   #P:2</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">#</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="c1">#                                _-----=&gt; irqs-off</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1">#                               / _----=&gt; need-resched</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="c1">#                              | / _---=&gt; hardirq/softirq</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="c1">#                              || / _--=&gt; preempt-depth</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="c1">#                              ||| / _-=&gt; migrate-disable</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="c1">#                              |||| /     delay</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="c1">#           TASK-PID     CPU#  |||||  TIMESTAMP  FUNCTION</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="c1">#              | |         |   |||||     |         |</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322794:<span class="w"> </span>enqueue_entity<span class="w"> </span>&lt;-enqueue_task_fair
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322794:<span class="w"> </span>update_curr<span class="w"> </span>&lt;-enqueue_entity
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322794:<span class="w"> </span>__update_load_avg_se<span class="w"> </span>&lt;-update_load_avg
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322794:<span class="w"> </span>__update_load_avg_cfs_rq<span class="w"> </span>&lt;-update_load_avg
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>update_cfs_group<span class="w"> </span>&lt;-enqueue_entity
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>reweight_entity<span class="w"> </span>&lt;-update_cfs_group
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>place_entity<span class="w"> </span>&lt;-enqueue_entity
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>hrtick_update<span class="w"> </span>&lt;-enqueue_task_fair
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>ttwu_do_wakeup<span class="w"> </span>&lt;-ttwu_do_activate
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>check_preempt_curr<span class="w"> </span>&lt;-ttwu_do_wakeup
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>d.h..<span class="w"> </span><span class="m">3975008</span>.322795:<span class="w"> </span>resched_curr<span class="w"> </span>&lt;-check_preempt_curr
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>raw_spin_rq_unlock<span class="w"> </span>&lt;-try_to_wake_up
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>_raw_spin_unlock_irqrestore<span class="w"> </span>&lt;-try_to_wake_up
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>_raw_spin_lock_irq<span class="w"> </span>&lt;-__hrtimer_run_queues
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>__remove_hrtimer<span class="w"> </span>&lt;-__hrtimer_run_queues
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>_raw_spin_unlock_irqrestore<span class="w"> </span>&lt;-__hrtimer_run_queues
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>hrtimer_wakeup<span class="w"> </span>&lt;-__hrtimer_run_queues
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">          </span>&lt;idle&gt;-0<span class="w">       </span><span class="o">[</span><span class="m">000</span><span class="o">]</span><span class="w"> </span>dNh..<span class="w"> </span><span class="m">3975008</span>.322796:<span class="w"> </span>wake_up_process<span class="w"> </span>&lt;-hrtimer_wakeup
</code></pre></div>
<h4 id="function_graph">function_graph<a class="headerlink" href="#function_graph" title="Permanent link">&para;</a></h4>
<p>function_graph 为函数调用关系跟踪器，使用方法如下：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>function_graph<span class="w"> </span>&gt;<span class="w"> </span>current_tracer
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>tracing_on
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>tracing_on
</code></pre></div>
<p>读取日志：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$<span class="w"> </span>cat<span class="w"> </span>trace<span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">40</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># tracer: function_graph</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1">#</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># CPU  DURATION                  FUNCTION CALLS</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># |     |   |                     |   |   |   |</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.302<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span><span class="o">}</span><span class="w"> </span>/*<span class="w"> </span>__update_load_avg_se<span class="w"> </span>*/
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.239<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.225<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.251<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_se<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.243<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.247<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.222<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_se<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.237<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.304<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.296<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.240<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>__update_load_avg_cfs_rq<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">8</span>.942<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                      </span><span class="o">}</span><span class="w"> </span>/*<span class="w"> </span>__update_blocked_fair<span class="w"> </span>*/
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.221<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                      </span>raw_spin_rq_unlock<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="m">12</span>.607<span class="w"> </span>us<span class="w">   </span><span class="p">|</span><span class="w">                    </span><span class="o">}</span><span class="w"> </span>/*<span class="w"> </span>update_blocked_averages<span class="w"> </span>*/
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">               </span><span class="p">|</span><span class="w">                    </span>load_balance<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">               </span><span class="p">|</span><span class="w">                      </span>find_busiest_group<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">               </span><span class="p">|</span><span class="w">                        </span>update_group_capacity<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.371<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                          </span>__msecs_to_jiffies<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.243<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                          </span>update_cpu_capacity<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">1</span>.328<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span><span class="o">}</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.281<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>idle_cpu<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.262<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                        </span>update_sd_pick_busiest<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">3</span>.278<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                      </span><span class="o">}</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">3</span>.885<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                    </span><span class="o">}</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.225<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                    </span>__msecs_to_jiffies<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.219<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                    </span>rcu_read_unlock_strict<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">               </span><span class="p">|</span><span class="w">                    </span>raw_spin_rq_lock_nested<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.214<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                      </span>_raw_spin_lock<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.615<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                    </span><span class="o">}</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="m">19</span>.516<span class="w"> </span>us<span class="w">   </span><span class="p">|</span><span class="w">                  </span><span class="o">}</span><span class="w"> </span>/*<span class="w"> </span>newidle_balance<span class="w"> </span>*/
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>+<span class="w"> </span><span class="m">19</span>.933<span class="w"> </span>us<span class="w">   </span><span class="p">|</span><span class="w">                </span><span class="o">}</span><span class="w"> </span>/*<span class="w"> </span>pick_next_task_fair<span class="w"> </span>*/
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">               </span><span class="p">|</span><span class="w">                </span>put_prev_task_fair<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.224<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                  </span>put_prev_entity<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">0</span>.222<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                  </span>put_prev_entity<span class="o">()</span><span class="p">;</span>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">   </span><span class="m">1</span>.190<span class="w"> </span>us<span class="w">    </span><span class="p">|</span><span class="w">                </span><span class="o">}</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w">               </span><span class="p">|</span><span class="w">                </span>pick_next_task_idle<span class="o">()</span><span class="w"> </span><span class="o">{</span>
</code></pre></div>
<h2 id="trace-cmd">trace-cmd<a class="headerlink" href="#trace-cmd" title="Permanent link">&para;</a></h2>
<p>使用<code>ftrace</code>需要对文件进行频繁的写入和读出，操作起来比较麻烦。而<code>trace-cmd</code>是对<code>ftrace</code>的封装，使用起来更加方便。</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>trace-cmd<span class="w"> </span>version<span class="w"> </span><span class="m">2</span>.9.1<span class="w"> </span><span class="o">(</span>d8edc93bf4a92a4575eb3fb1108fef8030ede48b<span class="o">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>usage:
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span>trace-cmd<span class="w"> </span><span class="o">[</span>COMMAND<span class="o">]</span><span class="w"> </span>...
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span>commands:
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">     </span>record<span class="w"> </span>-<span class="w"> </span>record<span class="w"> </span>a<span class="w"> </span>trace<span class="w"> </span>into<span class="w"> </span>a<span class="w"> </span>trace.dat<span class="w"> </span>file
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">     </span><span class="nb">set</span><span class="w"> </span>-<span class="w"> </span><span class="nb">set</span><span class="w"> </span>a<span class="w"> </span>ftrace<span class="w"> </span>configuration<span class="w"> </span>parameter
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">     </span>start<span class="w"> </span>-<span class="w"> </span>start<span class="w"> </span>tracing<span class="w"> </span>without<span class="w"> </span>recording<span class="w"> </span>into<span class="w"> </span>a<span class="w"> </span>file
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">     </span>extract<span class="w"> </span>-<span class="w"> </span>extract<span class="w"> </span>a<span class="w"> </span>trace<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>kernel
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">     </span>stop<span class="w"> </span>-<span class="w"> </span>stop<span class="w"> </span>the<span class="w"> </span>kernel<span class="w"> </span>from<span class="w"> </span>recording<span class="w"> </span>trace<span class="w"> </span>data
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">     </span>restart<span class="w"> </span>-<span class="w"> </span>restart<span class="w"> </span>the<span class="w"> </span>kernel<span class="w"> </span>trace<span class="w"> </span>data<span class="w"> </span>recording
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">     </span>show<span class="w"> </span>-<span class="w"> </span>show<span class="w"> </span>the<span class="w"> </span>contents<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>kernel<span class="w"> </span>tracing<span class="w"> </span>buffer
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">     </span>reset<span class="w"> </span>-<span class="w"> </span>disable<span class="w"> </span>all<span class="w"> </span>kernel<span class="w"> </span>tracing<span class="w"> </span>and<span class="w"> </span>clear<span class="w"> </span>the<span class="w"> </span>trace<span class="w"> </span>buffers
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">     </span>clear<span class="w"> </span>-<span class="w"> </span>clear<span class="w"> </span>the<span class="w"> </span>trace<span class="w"> </span>buffers
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">     </span>report<span class="w"> </span>-<span class="w"> </span><span class="nb">read</span><span class="w"> </span>out<span class="w"> </span>the<span class="w"> </span>trace<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>trace.dat<span class="w"> </span>file
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">     </span>stream<span class="w"> </span>-<span class="w"> </span>Start<span class="w"> </span>tracing<span class="w"> </span>and<span class="w"> </span><span class="nb">read</span><span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>directly
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">     </span>profile<span class="w"> </span>-<span class="w"> </span>Start<span class="w"> </span>profiling<span class="w"> </span>and<span class="w"> </span><span class="nb">read</span><span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>directly
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">     </span>hist<span class="w"> </span>-<span class="w"> </span>show<span class="w"> </span>a<span class="w"> </span>histogram<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>trace.dat<span class="w"> </span>information
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">     </span>stat<span class="w"> </span>-<span class="w"> </span>show<span class="w"> </span>the<span class="w"> </span>status<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>running<span class="w"> </span>tracing<span class="w"> </span><span class="o">(</span>ftrace<span class="o">)</span><span class="w"> </span>system
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">     </span>split<span class="w"> </span>-<span class="w"> </span>parse<span class="w"> </span>a<span class="w"> </span>trace.dat<span class="w"> </span>file<span class="w"> </span>into<span class="w"> </span>smaller<span class="w"> </span>file<span class="o">(</span>s<span class="o">)</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">     </span>options<span class="w"> </span>-<span class="w"> </span>list<span class="w"> </span>the<span class="w"> </span>plugin<span class="w"> </span>options<span class="w"> </span>available<span class="w"> </span><span class="k">for</span><span class="w"> </span>trace-cmd<span class="w"> </span>report
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">     </span>listen<span class="w"> </span>-<span class="w"> </span>listen<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>network<span class="w"> </span>socket<span class="w"> </span><span class="k">for</span><span class="w"> </span>trace<span class="w"> </span>clients
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">     </span>agent<span class="w"> </span>-<span class="w"> </span>listen<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>vsocket<span class="w"> </span><span class="k">for</span><span class="w"> </span>trace<span class="w"> </span>clients
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">     </span>setup-guest<span class="w"> </span>-<span class="w"> </span>create<span class="w"> </span>FIFOs<span class="w"> </span><span class="k">for</span><span class="w"> </span>tracing<span class="w"> </span>guest<span class="w"> </span>VMs
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">     </span>list<span class="w"> </span>-<span class="w"> </span>list<span class="w"> </span>the<span class="w"> </span>available<span class="w"> </span>events,<span class="w"> </span>plugins<span class="w"> </span>or<span class="w"> </span>options
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">     </span>restore<span class="w"> </span>-<span class="w"> </span>restore<span class="w"> </span>a<span class="w"> </span>crashed<span class="w"> </span>record
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">     </span>snapshot<span class="w"> </span>-<span class="w"> </span>take<span class="w"> </span>snapshot<span class="w"> </span>of<span class="w"> </span>running<span class="w"> </span>trace
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">     </span>stack<span class="w"> </span>-<span class="w"> </span>output,<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>or<span class="w"> </span>disable<span class="w"> </span>kernel<span class="w"> </span>stack<span class="w"> </span>tracing
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">     </span>check-events<span class="w"> </span>-<span class="w"> </span>parse<span class="w"> </span>trace<span class="w"> </span>event<span class="w"> </span>formats
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="w">     </span>dump<span class="w"> </span>-<span class="w"> </span><span class="nb">read</span><span class="w"> </span>out<span class="w"> </span>the<span class="w"> </span>meta<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>a<span class="w"> </span>trace<span class="w"> </span>file
</code></pre></div>
<h3 id="_3">使用方法<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><code>trace-cmd</code>有两种追踪方式：</p>
<ul>
<li><code>start</code>和<code>stop</code>：记录至ringbuffer中</li>
<li><code>record</code>和<code>report</code>：记录至文件trace.dat，类似于<code>perf</code></li>
</ul>
<p>显示可被追踪的函数：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>trace-cmd<span class="w"> </span>list<span class="w"> </span>-f
</code></pre></div>
<p>启用追踪器：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$<span class="w"> </span>trace-cmd<span class="w"> </span>start<span class="w"> </span>-p<span class="w"> </span><span class="k">function</span>
</code></pre></div>
<p>查看输出：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$<span class="w"> </span>trace-cmd<span class="w"> </span>show<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-20
</code></pre></div>
<p>关闭追踪器：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$<span class="w"> </span>trace-cmd<span class="w"> </span>stop
</code></pre></div>
<p>清除缓冲区：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$<span class="w"> </span>trace-cmd<span class="w"> </span>clear
</code></pre></div>
<h2 id="perf">perf<a class="headerlink" href="#perf" title="Permanent link">&para;</a></h2>
<p>perf 是一个事件驱动的观测工具，<code>perf help</code>列出了所有支持的指令：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$<span class="w"> </span>perf<span class="w"> </span><span class="nb">help</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w"> </span>usage:<span class="w"> </span>perf<span class="w"> </span><span class="o">[</span>--version<span class="o">]</span><span class="w"> </span><span class="o">[</span>--help<span class="o">]</span><span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span>COMMAND<span class="w"> </span><span class="o">[</span>ARGS<span class="o">]</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w"> </span>The<span class="w"> </span>most<span class="w"> </span>commonly<span class="w"> </span>used<span class="w"> </span>perf<span class="w"> </span>commands<span class="w"> </span>are:
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">   </span>annotate<span class="w">        </span>Read<span class="w"> </span>perf.data<span class="w"> </span><span class="o">(</span>created<span class="w"> </span>by<span class="w"> </span>perf<span class="w"> </span>record<span class="o">)</span><span class="w"> </span>and<span class="w"> </span>display<span class="w"> </span>annotated<span class="w"> </span>code
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">   </span>archive<span class="w">         </span>Create<span class="w"> </span>archive<span class="w"> </span>with<span class="w"> </span>object<span class="w"> </span>files<span class="w"> </span>with<span class="w"> </span>build-ids<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span>perf.data<span class="w"> </span>file
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">   </span>bench<span class="w">           </span>General<span class="w"> </span>framework<span class="w"> </span><span class="k">for</span><span class="w"> </span>benchmark<span class="w"> </span>suites
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">   </span>buildid-cache<span class="w">   </span>Manage<span class="w"> </span>build-id<span class="w"> </span>cache.
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">   </span>buildid-list<span class="w">    </span>List<span class="w"> </span>the<span class="w"> </span>buildids<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>perf.data<span class="w"> </span>file
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">   </span>c2c<span class="w">             </span>Shared<span class="w"> </span>Data<span class="w"> </span>C2C/HITM<span class="w"> </span>Analyzer.
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">   </span>config<span class="w">          </span>Get<span class="w"> </span>and<span class="w"> </span><span class="nb">set</span><span class="w"> </span>variables<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>configuration<span class="w"> </span>file.
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">   </span>daemon<span class="w">          </span>Run<span class="w"> </span>record<span class="w"> </span>sessions<span class="w"> </span>on<span class="w"> </span>background
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">   </span>data<span class="w">            </span>Data<span class="w"> </span>file<span class="w"> </span>related<span class="w"> </span>processing
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">   </span>diff<span class="w">            </span>Read<span class="w"> </span>perf.data<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>display<span class="w"> </span>the<span class="w"> </span>differential<span class="w"> </span>profile
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">   </span>evlist<span class="w">          </span>List<span class="w"> </span>the<span class="w"> </span>event<span class="w"> </span>names<span class="w"> </span><span class="k">in</span><span class="w"> </span>a<span class="w"> </span>perf.data<span class="w"> </span>file
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">   </span>ftrace<span class="w">          </span>simple<span class="w"> </span>wrapper<span class="w"> </span><span class="k">for</span><span class="w"> </span>kernel<span class="s1">&#39;s ftrace functionality</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="s1">   inject          Filter to augment the events stream with additional information</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="s1">   iostat          Show I/O performance metrics</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="s1">   kallsyms        Searches running kernel for symbols</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="s1">   kmem            Tool to trace/measure kernel memory properties</span>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="s1">   kvm             Tool to trace/measure kvm guest os</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="s1">   list            List all symbolic event types</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="s1">   lock            Analyze lock events</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="s1">   mem             Profile memory accesses</span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="s1">   record          Run a command and record its profile into perf.data</span>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="s1">   report          Read perf.data (created by perf record) and display the profile</span>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a><span class="s1">   sched           Tool to trace/measure scheduler properties (latencies)</span>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="s1">   script          Read perf.data (created by perf record) and display trace output</span>
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="s1">   stat            Run a command and gather performance counter statistics</span>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="s1">   test            Runs sanity tests.</span>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a><span class="s1">   timechart       Tool to visualize total system behavior during a workload</span>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a><span class="s1">   top             System profiling tool.</span>
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a><span class="s1">   version         display the version of perf binary</span>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a><span class="s1">   probe           Define new dynamic tracepoints</span>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a><span class="s1">   trace           strace inspired tool</span>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a>
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a><span class="s1"> See &#39;</span>perf<span class="w"> </span><span class="nb">help</span><span class="w"> </span>COMMAND<span class="err">&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>on<span class="w"> </span>a<span class="w"> </span>specific<span class="w"> </span>command.
</code></pre></div>
<p>有三种关键的术语在这里先介绍：</p>
<ul>
<li>计数(count)：某个事件发生的次数</li>
<li>采样(sample)：收集调用事件的细节</li>
<li>追踪(trace)：记录事件发生的过程</li>
</ul>
<p><code>perf stat</code>可以收集一些计数信息：</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$<span class="w"> </span>perf<span class="w"> </span>stat
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>^C
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w"> </span>Performance<span class="w"> </span>counter<span class="w"> </span>stats<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">&#39;system wide&#39;</span>:
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">         </span><span class="m">10</span>,597.39<span class="w"> </span>msec<span class="w"> </span>cpu-clock<span class="w">                 </span><span class="c1">#    2.000 CPUs utilized          </span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">            </span><span class="m">13</span>,542<span class="w">      </span>context-switches<span class="w">          </span><span class="c1">#    1.278 K/sec                  </span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">             </span><span class="m">1</span>,205<span class="w">      </span>cpu-migrations<span class="w">            </span><span class="c1">#  113.707 /sec                   </span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">            </span><span class="m">13</span>,326<span class="w">      </span>page-faults<span class="w">               </span><span class="c1">#    1.257 K/sec                  </span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">   </span>&lt;not<span class="w"> </span>supported&gt;<span class="w">      </span>cycles<span class="w">                                                      </span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">   </span>&lt;not<span class="w"> </span>supported&gt;<span class="w">      </span>instructions<span class="w">                                                </span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">   </span>&lt;not<span class="w"> </span>supported&gt;<span class="w">      </span>branches<span class="w">                                                    </span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">   </span>&lt;not<span class="w"> </span>supported&gt;<span class="w">      </span>branch-misses<span class="w">                                               </span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">       </span><span class="m">5</span>.298707459<span class="w"> </span>seconds<span class="w"> </span><span class="nb">time</span><span class="w"> </span>elapsed
</code></pre></div>
<p><code>perf top</code>可以直接对系统进行采样：</p>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Samples: 25K of event &#39;cpu-clock:pppH&#39;, 4000 Hz, Event count (approx.): 3837575381 lost: 0/0 drop: 0/1045
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Overhead  Shared Object                                  Symbol
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>  16.48%  [kernel]                                       [k] trace_graph_entry                                                           ◆
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>   7.28%  [kernel]                                       [k] pvclock_clocksource_read                                                    ▒
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>   4.41%  [kernel]                                       [k] update_blocked_averages                                                     ▒
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>   4.29%  perf                                           [.] __symbols__insert                                                           ▒
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>   4.16%  [kernel]                                       [k] finish_task_switch.isra.0                                                   ▒
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>   3.81%  [kernel]                                       [k] __lock_text_start                                                           ▒
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>   2.89%  [kernel]                                       [k] function_graph_enter                                                        ▒
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>   2.45%  perf                                           [.] rb_next                                                                     ▒
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>   2.03%  [kernel]                                       [k] ftrace_graph_entry_test                                                     ▒
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>   1.97%  [kernel]                                       [k] hash_contains_ip                                                            ▒
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>   1.85%  [kernel]                                       [k] ftrace_graph_caller                                                         ▒
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>   1.59%  perf                                           [.] d_print_comp_inner                                                          ▒
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>   1.53%  [kernel]                                       [k] ftrace_ops_test                                                             ▒
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>   1.37%  [kernel]                                       [k] prepare_ftrace_return                                                       ▒
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>   1.26%  perf                                           [.] rust_demangle_callback                                                      ▒
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>   0.90%  [kernel]                                       [k] __softirqentry_text_start                                                   ▒
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>   0.85%  [kernel]                                       [k] ftrace_lookup_ip                                                            ▒
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>   0.75%  [kernel]                                       [k] __remove_mapping                                                            ▒
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>   0.71%  perf                                           [.] d_count_templates_scopes                                                    ▒
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>   0.70%  perf                                           [.] rb_insert_color                                                             ▒
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>   0.69%  libc.so.6                                      [.] _int_malloc                                                                 ▒
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>   0.61%  [kernel]                                       [k] shrink_active_list                                                          ▒
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>   0.61%  perf                                           [.] d_print_comp                                                                ▒
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>   0.58%  [kernel]                                       [k] do_user_addr_fault                                                          ▒
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>   0.48%  [kernel]                                       [k] __x86_indirect_thunk_rax                                                    ▒
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>   0.47%  [kernel]                                       [k] __run_timers.part.0                                                         ▒
</code></pre></div>
<p>而<code>perf record</code>则是把多个时间段的<code>perf top</code>结果保存到一个 perf.data 文件中，可以使用<code>perf report</code>来进行分析。</p>
<h3 id="_4">事件类型<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>perf 支持多种事件类型，命令<code>perf list</code>列出了所有支持的事件类型，包括：</p>
<ul>
<li>Software Events</li>
<li>Hardware Events</li>
<li>Tracepoints</li>
<li>USDT</li>
<li>Dynamic Tracing</li>
<li>Timed Profiling</li>
</ul>
<p><img alt="perf event" src="../../../images/kernel/perf_events_map.png" /></p>
<h3 id="_5">火焰图<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>使用<code>perf</code>记录事件</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$<span class="w"> </span>perf<span class="w"> </span>record<span class="w"> </span>-F<span class="w"> </span><span class="m">100</span><span class="w"> </span>-a<span class="w"> </span>-g<span class="w"> </span>--<span class="w"> </span>sleep<span class="w"> </span><span class="m">60</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>$<span class="w"> </span>perf<span class="w"> </span>script<span class="w"> </span>&gt;<span class="w"> </span>out.perf
</code></pre></div>
</li>
<li>
<p>折叠栈</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$<span class="w"> </span>FlameGraph/stackcollapse-perf.pl<span class="w"> </span>out.perf<span class="w"> </span>&gt;<span class="w"> </span>out.folded
</code></pre></div>
</li>
<li>
<p>生成火焰图</p>
<div class="language-SHELL highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>$<span class="w"> </span>FlameGraph/flamegraph.pl<span class="w"> </span>out.folded<span class="w"> </span>&gt;<span class="w"> </span>out.svg
</code></pre></div>
</li>
<li>
<p>在浏览器中打开</p>
</li>
</ol>
<h2 id="_6">跟踪点<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>静态跟踪，又称跟踪点(tracepoint)，是由内核开发者在内核函数中的特定逻辑位置处放置的，这些跟踪点会被编译到内核的二进制文件中。跟踪点的优势是它的 API 比较稳定，在内核版本升级后一般仍然可以工作。</p>
<p>跟踪点的格式是"子系统：事件名"，比如"kmem:kmalloc"。</p>
<p>跟踪点提供以下两个接口：</p>
<ul>
<li>基于 ftrace：通过 /sys/kernel/tracing/events/ 目录</li>
<li><code>perf_event_open()</code>：类似于 perf 工具</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.path", "toc.follow", "navigation.top", "content.code.copy", "search.highlight", "search.share"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>